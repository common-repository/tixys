jQuery(document).ready(function(t){var e=function(t,e,n,a){e.set("Site",Tx.config.site),t.setParam("dataType","jsonp"),t.setRequest(e),t.setIndicator(new Tx.IndicatorSpinner(n)),t.setMessageHandler(new Tx.MessageAlert),t.setCallback(a),t.execute()},n=function(t,n,a,s){var o=Tx.toInt(n.val());o?t.to||e(new Tx.Endpoint("shop.v1/Station.searchDestinations"),new Tx.RequestObject("shop.v1/StationSearch",{Station:o}),s,function(t){i(a,t.itemList)}):i(a,[])},a=function(t,e,n,a){var i=e.from||Tx.toInt(n.val()),s=e.to||Tx.toInt(a.val());i&&s||(alert(Tx.out("[:en]Please select a start and a destination station.[:de]Bitte wählen Sie eine Start- und eine Zielhaltestelle.")),Tx.stopEvent(t))},i=function(e,n){e.empty().attr("disabled",n.length?!1:"disabled"),n.length&&(e.append(Tx.sprintf("<option value='%s'>%s</option>",0,Tx.out("[:en]– Please select –[:de]– Bitte wählen –"))),t.each(n,function(t,n){e.append(Tx.sprintf("<option value='%s'>%s</option>",n.id,Tx.out(n.name)))}))},s="de"===Tx.config.locale.substr(0,2);t("form.tixys-search").each(function(){var e=t(this).attr("action",Tx.config.urlBase),i=txForms[e.attr("data-txform")],o=e.find("input.tixys-select-day"),d=e.find("input[name=day]"),c=e.find("select.tixys-select-station-from"),r=(e.find("img.tixys-from"),e.find("select.tixys-select-station-to")),l=e.find("img.tixys-to");e.submit(function(t){a(t,i,c,r)}),c.change(function(t){n(i,c,r,l)}),i.datepicker&&o.datepicker({dateFormat:s?"dd.mm.yy":"yy-mm-dd",firstDay:s?1:0,minDate:0,altField:d,altFormat:"yy-mm-dd"}).datepicker("setDate",new Date)})});